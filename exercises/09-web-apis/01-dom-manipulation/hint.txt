Use `jsdom` in tests and attach `global.window`/`global.document` before calling DOM helpers; clean up `dom.window.close()` after test.
